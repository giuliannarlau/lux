{% extends "includes/layout.html" %}

{% block title %}
  My Donations
{% endblock %}

{% block main %}

  <div class="container" id="accountContainer">
  
      {% if user_donations_list|length == 0 %}
        <hr>

          <!-- Donations section -->
          <div class="row justify-content-center">
            <div class="col-md-6 col-md my-auto">
              <p class="fs-4">No donations found.</p>
            </div>
            <div class="col-md-6 col-md">
              <a class="btn btn-white btn-large" href="/projects"
                >DONATE</a
              >
            </div>
          </div>

        <hr>
      {% else %}

        <!-- Supported projects table -->
        <h1 class="fs-3 mt-4">Supported Projects</h1>
        <hr class="mt-4"/>
        <div class="row justify-content-center">
          <div class="col-xs-12">
            <div class="table-responsive mb-3" id="donationsHistoryTable">
              <table
                class="table table-striped table-hover sortable align-middle m-auto mb-5 w-100"
              >
                <tr class="fs-6">
                  {% for key in supported_projects[0].keys() %}
                    <th scope="col">{{ key | replace("_", " ") | upper }}</th>
                  {% endfor %}
                </tr>
                {% for project in supported_projects %}
                  <tr class="donationRow">
                    {% for value in project.values() %}
                      <td>{{ value | capitalize }}</td>
                    {% endfor %}
                  </tr>
                {% endfor %}
              </table>
            </div>
          </div>
        </div>

        <!-- Donations history table -->
        <h1 class="fs-3">Donations History</h1>
        <hr class="mt-4"/>
        <div class="row justify-content-center">
          <div class="col-xs-12">
            <div class="table-responsive mb-3" id="donationsHistoryTable">
              <table
                class="table table-striped table-hover align-middle m-auto mb-5"
              >
                <tr class="fs-6">
                  {% for key in user_donations_list[0].keys() %}
                    <th scope="col">{{ key | replace("_", " ") | upper }}</th>
                  {% endfor %}
                </tr>
                {% for donation in user_donations_list %}
                  <tr class="donationRow">
                    {% for value in donation.values() %}
                      <td>{{ value | capitalize }}</td>
                    {% endfor %}
                  </tr>
                {% endfor %}
              </table>
            </div>
          </div>
        </div>
      {% endif %}
    </div>

{% endblock %}
